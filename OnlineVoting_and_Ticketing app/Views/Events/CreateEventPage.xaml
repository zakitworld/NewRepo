<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OnlineVoting_and_Ticketing_app.Views.Events.CreateEventPage"
             Title="Create Event"
             BackgroundColor="{StaticResource Background}">

    <Grid RowDefinitions="*">
        <!-- Background Glow -->
        <Ellipse WidthRequest="400" HeightRequest="400" 
                 Fill="{StaticResource Primary}" Opacity="0.03" 
                 VerticalOptions="Start" HorizontalOptions="End" Margin="0,-200,-200,0"/>

        <ScrollView>
            <VerticalStackLayout Padding="25" Spacing="25">

                <VerticalStackLayout Spacing="5">
                    <Label Text="Host an Event" Style="{StaticResource Headline}" HorizontalOptions="Start" TextColor="{StaticResource White}"/>
                    <Label Text="Fill in the details to launch your experience." FontSize="14" TextColor="{StaticResource TextSecondary}"/>
                </VerticalStackLayout>

                <!-- Event Visual -->
                <VerticalStackLayout Spacing="12">
                    <Label Text="EVENT COVER" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                    <Border StrokeShape="RoundRectangle 20" HeightRequest="220" Padding="0">
                        <Grid>
                            <Image x:Name="EventImagePreview" Aspect="AspectFill" IsVisible="False" />
                            <Rectangle Fill="{StaticResource Surface}" Opacity="0.5" />
                            <VerticalStackLayout x:Name="ImagePlaceholder" VerticalOptions="Center" HorizontalOptions="Center" Spacing="15">
                                <Label Text="ðŸ–¼ï¸" FontSize="44" HorizontalOptions="Center" Opacity="0.6"/>
                                <Label Text="Tap to upload cover image" FontSize="13" TextColor="{StaticResource TextSecondary}" HorizontalOptions="Center" />
                            </VerticalStackLayout>
                        </Grid>
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnSelectImageTapped" />
                        </Border.GestureRecognizers>
                    </Border>
                    <Border Padding="15,2" HeightRequest="50">
                        <Entry x:Name="ImageUrlEntry" Placeholder="Or paste cover URL here" TextColor="{StaticResource White}" PlaceholderColor="{StaticResource TextSecondary}" FontSize="13" VerticalOptions="Center" TextChanged="OnImageUrlChanged" />
                    </Border>
                </VerticalStackLayout>

                <!-- General Info -->
                <VerticalStackLayout Spacing="20">
                    <Label Text="EVENT DETAILS" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                    
                    <VerticalStackLayout Spacing="8">
                        <Border Padding="18,5">
                            <Entry x:Name="TitleEntry" Placeholder="Event Title (e.g. Neon Nights)" TextColor="{StaticResource White}" PlaceholderColor="{StaticResource TextSecondary}" FontSize="15" />
                        </Border>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="8">
                        <Border Padding="18,10">
                            <Editor x:Name="DescriptionEditor" Placeholder="Share the story behind your event..." TextColor="{StaticResource White}" PlaceholderColor="{StaticResource TextSecondary}" HeightRequest="120" AutoSize="TextChanges" FontSize="15" BackgroundColor="Transparent"/>
                        </Border>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="8">
                        <Border Padding="18,5">
                            <Entry x:Name="LocationEntry" Placeholder="Venue or Online Link" TextColor="{StaticResource White}" PlaceholderColor="{StaticResource TextSecondary}" FontSize="15" />
                        </Border>
                    </VerticalStackLayout>
                </VerticalStackLayout>

                <!-- Date & Time Section -->
                <VerticalStackLayout Spacing="20">
                    <Label Text="SCHEDULE" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                    
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Starts" FontSize="13" TextColor="{StaticResource White}" Margin="5,0"/>
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                            <Border Grid.Column="0" Padding="15,5">
                                <DatePicker x:Name="StartDatePicker" TextColor="{StaticResource White}" Format="MMM dd, yyyy" FontSize="14" BackgroundColor="Transparent"/>
                            </Border>
                            <Border Grid.Column="1" Padding="15,5">
                                <TimePicker x:Name="StartTimePicker" TextColor="{StaticResource White}" Format="h:mm tt" FontSize="14" BackgroundColor="Transparent"/>
                            </Border>
                        </Grid>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="10">
                        <Label Text="Ends" FontSize="13" TextColor="{StaticResource White}" Margin="5,0"/>
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                            <Border Grid.Column="0" Padding="15,5">
                                <DatePicker x:Name="EndDatePicker" TextColor="{StaticResource White}" Format="MMM dd, yyyy" FontSize="14" BackgroundColor="Transparent"/>
                            </Border>
                            <Border Grid.Column="1" Padding="15,5">
                                <TimePicker x:Name="EndTimePicker" TextColor="{StaticResource White}" Format="h:mm tt" FontSize="14" BackgroundColor="Transparent"/>
                            </Border>
                        </Grid>
                    </VerticalStackLayout>
                </VerticalStackLayout>

                <!-- Categorization -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="20">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="CATEGORY" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                        <Border Padding="15,5">
                            <Picker x:Name="CategoryPicker" Title="Select" TextColor="{StaticResource White}" TitleColor="{StaticResource TextSecondary}" FontSize="14" BackgroundColor="Transparent">
                                <Picker.ItemsSource>
                                    <x:Array Type="{x:Type x:String}">
                                        <x:String>Music</x:String>
                                        <x:String>Sports</x:String>
                                        <x:String>Conference</x:String>
                                        <x:String>Workshop</x:String>
                                        <x:String>Exhibition</x:String>
                                        <x:String>Festival</x:String>
                                        <x:String>Theater</x:String>
                                        <x:String>Comedy</x:String>
                                        <x:String>Other</x:String>
                                    </x:Array>
                                </Picker.ItemsSource>
                            </Picker>
                        </Border>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="10" Grid.Column="1">
                        <Label Text="DELIVERY" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                        <Border Padding="15,5">
                            <Picker x:Name="EventTypePicker" Title="Select" TextColor="{StaticResource White}" TitleColor="{StaticResource TextSecondary}" FontSize="14" BackgroundColor="Transparent">
                                <Picker.ItemsSource>
                                    <x:Array Type="{x:Type x:String}">
                                        <x:String>InPerson</x:String>
                                        <x:String>Virtual</x:String>
                                        <x:String>Hybrid</x:String>
                                    </x:Array>
                                </Picker.ItemsSource>
                            </Picker>
                        </Border>
                    </VerticalStackLayout>
                </Grid>

                <!-- Ticket Types Section -->
                <VerticalStackLayout Spacing="20">
                    <Label Text="TICKET TIERS" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                    
                    <VerticalStackLayout x:Name="TicketTypesContainer" Spacing="15" />

                    <Button Text="+ Add Another Tier" Clicked="OnAddTicketTypeClicked" BackgroundColor="Transparent" TextColor="{StaticResource Primary}" BorderColor="{StaticResource Primary}" BorderWidth="1" HeightRequest="50" CornerRadius="15"/>
                </VerticalStackLayout>

                <!-- Error Message -->
                <Label x:Name="ErrorLabel" TextColor="{StaticResource Error}" FontSize="13" IsVisible="False" HorizontalTextAlignment="Center" Margin="0,10" />

                <!-- Action Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,0,0,30">
                    <Button Grid.Column="0" Text="Discard" Clicked="OnCancelClicked" BackgroundColor="Transparent" TextColor="{StaticResource TextSecondary}" BorderColor="{StaticResource GlassBorderBrush}" BorderWidth="1" HeightRequest="56" CornerRadius="15" />
                    <Button Grid.Column="1" x:Name="CreateButton" Text="CREATE EVENT" Clicked="OnCreateEventClicked" Style="{StaticResource Button}" HeightRequest="56" CornerRadius="15" />
                </Grid>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
