<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:OnlineVoting_and_Ticketing_app.ViewModels.Auth"
             x:Class="OnlineVoting_and_Ticketing_app.Views.Auth.LoginPage"
             x:DataType="vm:LoginViewModel"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{StaticResource Background}">

    <Grid>
        <!-- Background Decoration -->
        <Ellipse WidthRequest="300" HeightRequest="300" 
                  Fill="{StaticResource Primary}" 
                  Opacity="0.15" VerticalOptions="Start" 
                  HorizontalOptions="End" Margin="0,-100,-100,0">
            <Ellipse.Shadow>
                <Shadow Brush="{StaticResource Primary}" Radius="100" Opacity="0.5"/>
            </Ellipse.Shadow>
        </Ellipse>

        <ScrollView VerticalOptions="Fill">
            <VerticalStackLayout Padding="30,60,30,30" Spacing="0">
                
                <!-- Logo/Branding -->
                <VerticalStackLayout Spacing="10" Margin="0,0,0,50">
                    <Label Text="EventHub" 
                           Style="{StaticResource Headline}"
                           TextColor="{StaticResource Primary}"/>
                    <Label Text="Your Gateway to Endless Possibilities" 
                           Style="{StaticResource SubHeadline}"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>

                <!-- Glass Card -->
                <Border Style="{StaticResource Border}" Padding="25,35" Margin="0,0,0,20">
                    <VerticalStackLayout Spacing="25">
                        <Label Text="Welcome Back" 
                               FontSize="28" 
                               FontAttributes="Bold" 
                               TextColor="{StaticResource White}"
                               HorizontalOptions="Start"/>

                        <!-- Input Fields -->
                        <VerticalStackLayout Spacing="15">
                            <VerticalStackLayout Spacing="8">
                                <Label Text="Email Address" TextColor="{StaticResource TextSecondary}" FontSize="12"/>
                                <Border Stroke="{StaticResource GlassBorderBrush}" 
                                        StrokeShape="RoundRectangle 8" 
                                        Background="#10FFFFFF" 
                                        Padding="12,2">
                                    <Entry x:Name="EmailEntry" 
                                           Text="{Binding Email}"
                                           Placeholder="name@example.com" 
                                           Keyboard="Email"
                                           Style="{StaticResource Entry}"/>
                                </Border>
                            </VerticalStackLayout>

                            <VerticalStackLayout Spacing="8">
                                <Grid ColumnDefinitions="*,Auto">
                                    <Label Text="Password" TextColor="{StaticResource TextSecondary}" FontSize="12"/>
                                    <Label Grid.Column="1" Text="Forgot Password?" 
                                           TextColor="{StaticResource Primary}" 
                                           FontSize="12" 
                                           HorizontalOptions="End">
                                        <Label.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding ForgotPasswordCommand}"/>
                                        </Label.GestureRecognizers>
                                    </Label>
                                </Grid>
                                <Border Stroke="{StaticResource GlassBorderBrush}" 
                                        StrokeShape="RoundRectangle 8" 
                                        Background="#10FFFFFF" 
                                        Padding="12,2">
                                    <Entry x:Name="PasswordEntry" 
                                           Text="{Binding Password}"
                                           Placeholder="••••••••" 
                                           IsPassword="True"
                                           Style="{StaticResource Entry}"/>
                                </Border>
                            </VerticalStackLayout>
                        </VerticalStackLayout>

                        <Button x:Name="LoginButton" 
                                Text="Sign In" 
                                Command="{Binding LoginCommand}" 
                                IsEnabled="{Binding IsNotBusy}"
                                Style="{StaticResource Button}"
                                HeightRequest="56"/>

                        <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                          IsVisible="{Binding IsBusy}" 
                                          Color="{StaticResource Primary}" 
                                          HorizontalOptions="Center"
                                          HeightRequest="40"/>

                        <Label x:Name="ErrorLabel" 
                               Text="{Binding ErrorMessage}"
                               TextColor="{StaticResource Tertiary}" 
                               FontSize="13" 
                               IsVisible="{Binding HasError}" 
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </Border>

                <!-- Alternative Login -->
                <VerticalStackLayout Spacing="20" HorizontalOptions="Center">
                    <Label Text="Or continue with" 
                           TextColor="{StaticResource TextSecondary}" 
                           HorizontalOptions="Center"/>
                    
                    <HorizontalStackLayout Spacing="15" HorizontalOptions="Center">
                        <Border Style="{StaticResource Border}" Padding="25,12" WidthRequest="120">
                            <Label Text="Google" HorizontalOptions="Center" TextColor="{StaticResource White}"/>
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding GoogleLoginCommand}"/>
                            </Border.GestureRecognizers>
                        </Border>
                        <Border Style="{StaticResource Border}" Padding="25,12" WidthRequest="120">
                            <Label Text="Facebook" HorizontalOptions="Center" TextColor="{StaticResource White}"/>
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding FacebookLoginCommand}"/>
                            </Border.GestureRecognizers>
                        </Border>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="5" HorizontalOptions="Center" Margin="0,20,0,0">
                        <Label Text="New to EventHub?" TextColor="{StaticResource TextSecondary}"/>
                        <Label Text="Create Account" 
                               TextColor="{StaticResource Primary}" 
                               FontAttributes="Bold">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding SignUpCommand}"/>
                            </Label.GestureRecognizers>
                        </Label>
                    </HorizontalStackLayout>
                </VerticalStackLayout>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>

</ContentPage>
