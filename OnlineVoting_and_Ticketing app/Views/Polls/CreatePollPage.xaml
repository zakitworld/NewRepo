<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="OnlineVoting_and_Ticketing_app.Views.Polls.CreatePollPage"
             Title="Create Poll"
             BackgroundColor="{StaticResource Background}">

    <Grid RowDefinitions="*">
        <!-- Background Glow -->
        <Ellipse WidthRequest="400" HeightRequest="400" 
                 Fill="{StaticResource Primary}" Opacity="0.03" 
                 VerticalOptions="Start" HorizontalOptions="Start" Margin="-200,-200,0,0"/>

        <ScrollView>
            <VerticalStackLayout Padding="25" Spacing="25">

                <VerticalStackLayout Spacing="5">
                    <Label Text="Create a Poll" Style="{StaticResource Headline}" HorizontalOptions="Start" TextColor="{StaticResource White}"/>
                    <Label Text="Engage your audience with interactive questions." FontSize="14" TextColor="{StaticResource TextSecondary}"/>
                </VerticalStackLayout>

                <!-- General Info -->
                <VerticalStackLayout Spacing="20">
                    <Label Text="POLL DETAILS" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                    
                    <VerticalStackLayout Spacing="8">
                        <Border Padding="18,5">
                            <Entry x:Name="TitleEntry" Placeholder="What's on your mind? (e.g. Best Artist 2024)" TextColor="{StaticResource White}" PlaceholderColor="{StaticResource TextSecondary}" FontSize="15" />
                        </Border>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="8">
                        <Border Padding="18,10">
                            <Editor x:Name="DescriptionEditor" Placeholder="Add context or instructions for voters..." TextColor="{StaticResource White}" PlaceholderColor="{StaticResource TextSecondary}" HeightRequest="100" AutoSize="TextChanges" FontSize="15" BackgroundColor="Transparent"/>
                        </Border>
                    </VerticalStackLayout>
                </VerticalStackLayout>

                <!-- Schedule -->
                <VerticalStackLayout Spacing="20">
                    <Label Text="DURATION" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="Starts" FontSize="13" TextColor="{StaticResource White}" Margin="5,0"/>
                            <Border Padding="15,5">
                                <DatePicker x:Name="StartDatePicker" TextColor="{StaticResource White}" Format="MMM dd" FontSize="14" BackgroundColor="Transparent"/>
                            </Border>
                        </VerticalStackLayout>
                        <VerticalStackLayout Spacing="10" Grid.Column="1">
                            <Label Text="Ends" FontSize="13" TextColor="{StaticResource White}" Margin="5,0"/>
                            <Border Padding="15,5">
                                <DatePicker x:Name="EndDatePicker" TextColor="{StaticResource White}" Format="MMM dd" FontSize="14" BackgroundColor="Transparent"/>
                            </Border>
                        </VerticalStackLayout>
                    </Grid>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                        <Border Padding="15,5">
                            <TimePicker x:Name="StartTimePicker" TextColor="{StaticResource White}" Format="h:mm tt" FontSize="14" BackgroundColor="Transparent"/>
                        </Border>
                        <Border Grid.Column="1" Padding="15,5">
                            <TimePicker x:Name="EndTimePicker" TextColor="{StaticResource White}" Format="h:mm tt" FontSize="14" BackgroundColor="Transparent"/>
                        </Border>
                    </Grid>
                </VerticalStackLayout>

                <!-- Settings -->
                <VerticalStackLayout Spacing="20">
                    <Label Text="CONFIGURATIONS" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                    
                    <Border Padding="15,5">
                        <Picker x:Name="PollTypePicker" Title="Selection Type" SelectedIndexChanged="OnPollTypeChanged" TextColor="{StaticResource White}" TitleColor="{StaticResource TextSecondary}" FontSize="14" BackgroundColor="Transparent">
                            <Picker.ItemsSource>
                                <x:Array Type="{x:Type x:String}">
                                    <x:String>Single Choice</x:String>
                                    <x:String>Multiple Choice</x:String>
                                </x:Array>
                            </Picker.ItemsSource>
                        </Picker>
                    </Border>

                    <!-- Switches Grid -->
                    <Border Padding="20">
                        <VerticalStackLayout Spacing="20">
                            <Grid ColumnDefinitions="*,Auto">
                                <VerticalStackLayout VerticalOptions="Center">
                                    <Label Text="Multi-selection" FontSize="15" TextColor="{StaticResource White}"/>
                                    <Label Text="Voters can choose more than one" FontSize="11" TextColor="{StaticResource TextSecondary}"/>
                                </VerticalStackLayout>
                                <Switch x:Name="MultipleChoiceSwitch" Grid.Column="1" OnColor="{StaticResource Primary}" ThumbColor="{StaticResource White}" />
                            </Grid>

                            <BoxView HeightRequest="1" Color="{StaticResource GlassBorderBrush}" Opacity="0.5"/>

                            <Grid ColumnDefinitions="*,Auto">
                                <VerticalStackLayout VerticalOptions="Center">
                                    <Label Text="Anonymous Results" FontSize="15" TextColor="{StaticResource White}"/>
                                    <Label Text="Hide voter identities" FontSize="11" TextColor="{StaticResource TextSecondary}"/>
                                </VerticalStackLayout>
                                <Switch x:Name="AnonymousSwitch" Grid.Column="1" OnColor="{StaticResource Primary}" ThumbColor="{StaticResource White}" />
                            </Grid>

                            <BoxView HeightRequest="1" Color="{StaticResource GlassBorderBrush}" Opacity="0.5"/>

                            <Grid ColumnDefinitions="*,Auto">
                                <VerticalStackLayout VerticalOptions="Center">
                                    <Label Text="Public Access" FontSize="15" TextColor="{StaticResource White}"/>
                                    <Label Text="Anyone can vote without account" FontSize="11" TextColor="{StaticResource TextSecondary}"/>
                                </VerticalStackLayout>
                                <Switch x:Name="RequireAuthSwitch" Grid.Column="1" IsToggled="True" OnColor="{StaticResource Primary}" ThumbColor="{StaticResource White}" />
                            </Grid>
                        </VerticalStackLayout>
                    </Border>
                </VerticalStackLayout>

                <!-- Poll Options -->
                <VerticalStackLayout Spacing="20">
                    <Label Text="RESPONSE OPTIONS" FontSize="11" FontAttributes="Bold" TextColor="{StaticResource TextSecondary}" CharacterSpacing="1"/>
                    
                    <VerticalStackLayout x:Name="OptionsContainer" Spacing="15" />

                    <Button Text="+ New Option" Clicked="OnAddOptionClicked" BackgroundColor="Transparent" TextColor="{StaticResource Primary}" BorderColor="{StaticResource Primary}" BorderWidth="1" HeightRequest="50" CornerRadius="15"/>
                </VerticalStackLayout>

                <!-- Error Message -->
                <Label x:Name="ErrorLabel" TextColor="{StaticResource Error}" FontSize="13" IsVisible="False" HorizontalTextAlignment="Center" Margin="0,10" />

                <!-- Action Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,0,0,30">
                    <Button Grid.Column="0" Text="Discard" Clicked="OnCancelClicked" BackgroundColor="Transparent" TextColor="{StaticResource TextSecondary}" BorderColor="{StaticResource GlassBorderBrush}" BorderWidth="1" HeightRequest="56" CornerRadius="15" />
                    <Button Grid.Column="1" x:Name="CreateButton" Text="LAUNCH POLL" Clicked="OnCreatePollClicked" Style="{StaticResource Button}" HeightRequest="56" CornerRadius="15" />
                </Grid>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
